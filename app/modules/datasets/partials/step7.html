<dataset-create-wrapper>
    <dataset-create-header step="7" before-prev-step="prevStep()" save="saveObject"></dataset-create-header>

    <form name="datasetForm" role="form" novalidate>
        <div class="row">
            <div class="col-lg-4">
                <fieldset>
                    <legend>Main Details</legend>
                    <div class="form-group" ng-class="{'has-error': datasetForm.title.$dirty && datasetForm.title.$invalid}">
                        <label for="title">Title *</label>
                        <input type="text" class="form-control" id="title" name="title" placeholder="Dataset Title" ng-model="dataset.title" ng-minlength="3" required>
                    </div>

                    <div class="form-group" ng-class="{'has-error': datasetForm.keywords.$dirty && datasetForm.keywords.$invalid}">
                        <label for="keywords">Keywords *</label>
                        <input type="text" class="form-control" id="keywords" name="keywords" placeholder="Keywords" ng-model="dataset.keywords" required>
                    </div>
                    <div class="form-group">
                        <label for="spatial">Spatial</label>

                        <div id="spatial" class="reference-selection pc-reference-selection-full" resource="Individual" selection-mode="single" output="spatial.output" input="spatial.input" parameters="{ class: 'Country' }"></div>
                    </div>

                    <div class="form-group">
                        <label for="language">Language *</label>

                        <div id="language" class="reference-selection pc-reference-selection-full" resource="Language" selection-mode="single" output="language.output" input="language.input"></div>
                    </div>

                    <div class="form-group" ng-class="{'has-error': datasetForm.license.$dirty && datasetForm.license.$invalid}">
                        <label for="license">Licence</label>
                        <input type="text" class="form-control" id="license" name="license" placeholder="CC BY 3.0" ng-model="dataset.license" required>
                    </div>
                </fieldset>
            </div>
            <div class="col-lg-8">
                <fieldset>
                    <legend>Further Information</legend>
                    <div class="form-group" ng-class="{'has-error': datasetForm.description.$dirty && datasetForm.description.$invalid}">
                        <label for="dataset-description" class="">Description *</label>
                        <textarea class="form-control" rows="5" id="dataset-description" name="dataset-description" ng-model="dataset.description" required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="policy_domain">Policy Domains *</label>

                        <div id="policy_domain" class="reference-selection pc-reference-selection-full" resource="PolicyDomain" selection-mode="multiple" output="policy_domains.output" input="policy_domains.input"></div>
                    </div>
                    <legend>Resource Data</legend>
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="form-group date-picker" ng-controller="DateController">
                                <label for="retrievalDate">Date of Retrieval *</label>
                                <span class="input-group">
                                    <input type="text" id="retrievalDate" name="retrievalDate" class="form-control" datepicker-popup="{{ format }}" ng-model="dataset.resource.issued" is-open="opened" min-date="minDate" max-date="maxDate" datepicker-options="dateOptions" show-button-bar="false" ng-required="false" close-text="Close"/>
                                <span class="input-group-btn">
                                    <a type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></a>
                                </span>
                                </span>
                            </div>

                        </div>
                        <div class="col-lg-6">

                            <div class="form-group" ng-class="{'has-error': datasetForm.url.$dirty && datasetForm.url.$invalid}">
                                <label for="url">URL *</label>
                                <input type="text" class="form-control" id="url" name="url" placeholder="http://eurostat.eu/1282" ng-model="dataset.url" required>
                            </div>

                        </div>

                    </div>

                    <legend>External Resource</legend>
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="form-group" ng-show="!custom">
                                <label for="external_resource">External Resource *</label>

                                <div id="external_resource" class="reference-selection pc-reference-selection-full" resource="ExternalResource" selection-mode="single" output="external_resource.output" input="external_resource.input"></div>
                            </div>

                            <div class="form-group" ng-show="custom" ng-class="{'has-error': datasetForm.custom.$dirty && datasetForm.custom.$invalid}">
                                <label for="custom">Custom</label>
                                <input type="text" class="form-control" id="custom" name="custom" placeholder="Open Data XY" ng-model="dataset.resource.custom" required>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="form-group" ng-show="!custom">
                                <button class="btn btn-info pc-er-button" ng-click="toogleResource()">Not there?</button>
                            </div>

                            <div class="form-group" ng-show="custom">
                                <button class="btn btn-info pc-er-button" ng-click="toogleResource()">Choose from known Sources</button>
                            </div>
                        </div>
                    </div>
                </fieldset>

            </div>


        </div>
    </form>

</dataset-create-wrapper>
